# Auth System with JWT, Redis, RBAC

## –û–ø–∏—Å–∞–Ω–∏–µ

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:

- **FastAPI** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ web-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞.
- **JWT (JSON Web Token)** –¥–ª—è —Ç–æ–∫–µ–Ω-–±–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
- **Redis** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∞–ª–∏–¥–Ω—ã—Ö –∏ –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ (whitelist/blacklist).
- **Role-Based Access Control (RBAC)** –¥–ª—è —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É.
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π **—Ñ—Ä–æ–Ω—Ç –Ω–∞ Jinja2 + Tailwind CSS** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã.

---

## –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –ª–æ–≥–∏–Ω–∞.
   - –ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ —Å–µ—Ä–≤–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JWT —Ç–æ–∫–µ–Ω —Å username, —Ä–æ–ª—å—é –∏ –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏.
   - –¢–æ–∫–µ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ Redis whitelist –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ cookies –±—Ä–∞—É–∑–µ—Ä–∞.

2. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:**
   - –í—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ç–æ–∫–µ–Ω:
     - –ü–æ–¥–ø–∏—Å—å JWT.
     - –ù–∞–ª–∏—á–∏–µ –≤ Redis whitelist.
     - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤ Redis blacklist.
   - –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É.

3. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:**
   - **–û–±—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
   - **Admin Panel** ‚Äî –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–æ–ª–∏ `admin`.
   - **User Dashboard** ‚Äî –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–æ–ª–∏ `user`.

4. **Logout:**
   - –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ —Ç–æ–∫–µ–Ω —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ whitelist –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ blacklist, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–∑—ã–≤–∞—è –µ–≥–æ.

5. **Debug-—Å—Ç—Ä–∞–Ω–∏—Ü–∞:**
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—Ä—É—á–Ω—É—é —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω —Å –Ω—É–∂–Ω–æ–π —Ä–æ–ª—å—é –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã.

---



##  –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫:
### 1Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ `.env` —Ñ–∞–π–ª–∞

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞. –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:

```env
SECRET_KEY=your_secret_key
ACCESS_TOKEN_EXPIRE_MINUTES=30
REDIS_HOST=redis
REDIS_PORT=6379
```
–§–∞–π–ª .env.example –ø—Ä–∏–≤–µ–¥—ë–Ω –≤ –ø—Ä–æ–µ–∫—Ç–µ ‚Äî –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –∫–∞–∫ —à–∞–±–ª–æ–Ω.

```bash
  docker-compose up --build
```
## –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000


## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

| URL                 | –ú–µ—Ç–æ–¥    | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                     | –î–æ—Å—Ç—É–ø                              |
|--------------------|---------|--------------------------------------------------------------------------------------------|-------------------------------------|
| `/login/`           | GET/POST | –§–æ—Ä–º–∞ –ª–æ–≥–∏–Ω–∞. –í–≤–æ–¥ username –∏ –≤—ã–±–æ—Ä —Ä–æ–ª–∏.                                                    | –î–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º                       |
| `/content/`         | GET      | –ö–æ–Ω—Ç–µ–Ω—Ç —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º: –æ–±—â–∏–π –±–ª–æ–∫ + –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ —Ä–æ–ª–∏.                                         | –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º |
| `/logout/`          | POST     | –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã. –£–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ whitelist, –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ blacklist.                         | –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º |
| `/debug/`           | GET/POST | Debug-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ —Å –Ω—É–∂–Ω–æ–π —Ä–æ–ª—å—é (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è).             | –î–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º (–¥–ª—è —Ç–µ—Å—Ç–∞)           |
| `/admin/block/`     | GET/POST | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ username (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –µ–≥–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ blacklist).  | –¢–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—å—é admin |
